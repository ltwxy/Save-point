@echo off
chcp 65001 >nul
title ğŸš€ ACM è®­ç»ƒæ—¥ç»“åŠ©æ‰‹ (Auto Commit Tool)
color 0A

echo ========================================================
echo        ğŸš€ ACM è®­ç»ƒæ—¥ç»“åŠ©æ‰‹ (Auto Commit Tool)
echo ========================================================
echo.

:: --- æ–°å¢åŠŸèƒ½ï¼šè‡ªåŠ¨æ¸…ç† .exe æ–‡ä»¶ ---
echo [ğŸ§¹ æ¸…ç†ä¸­] æ­£åœ¨åˆ é™¤æ‰€æœ‰ç¼–è¯‘ç”Ÿæˆçš„ .exe æ–‡ä»¶...
del /s /q *.exe >nul 2>&1
echo âœ… æ¸…ç†å®Œæˆï¼ä½ çš„ç›®å½•ç°åœ¨å¾ˆå¹²å‡€ã€‚
echo --------------------------------------------------------

echo.
echo æ­£åœ¨æ‰«æå˜åŠ¨æ–‡ä»¶...
git status -s
echo.

:: è¿™é‡Œçš„é€»è¾‘ä¸å˜ï¼Œå¤„ç† .bat è‡ªå·±
echo [å¤„ç†ä¸­] daily_commit.bat
git add daily_commit.bat
git commit -m "Update: ä¼˜åŒ–è„šæœ¬ï¼Œå¢åŠ è‡ªåŠ¨æ¸…ç†exeåŠŸèƒ½" >nul 2>&1

:: è¯¢é—®å¤‡æ³¨å¹¶æäº¤å…¶ä»–æ–‡ä»¶
set /p msg="è¯·è¾“å…¥æœ¬æ¬¡æäº¤çš„å¤‡æ³¨ (ä¾‹å¦‚: AC Codeforces 1001): "

if "%msg%"=="" set msg=Daily Update

git add .
git commit -m "%msg%"

echo.
echo --------------------------------------------------------
echo æ­£åœ¨æ¨é€åˆ° GitHub...
git push

if %errorlevel% neq 0 (
    color 0C
    echo.
    echo âŒ æ¨é€å¤±è´¥ï¼è¯·æ£€æŸ¥ç½‘ç»œæˆ–ä»£ç†è®¾ç½®ã€‚
) else (
    echo.
    echo ğŸ‰ æˆåŠŸï¼ä»£ç å·²åŒæ­¥ï¼Œåƒåœ¾å·²æ¸…ç†ã€‚
)

echo.
pause