@echo off
chcp 65001 >nul
title ğŸš€ ACM è®­ç»ƒæ—¥ç»“åŠ©æ‰‹ (Auto Commit Tool)
color 0A

echo ========================================================
echo        ğŸš€ ACM è®­ç»ƒæ—¥ç»“åŠ©æ‰‹ (Auto Commit Tool)
echo ========================================================
echo.

:: --- æ–°å¢åŠŸèƒ½ï¼šè‡ªåŠ¨æ¸…ç† .exe æ–‡ä»¶ ---
echo [ğŸ§¹ æ¸…ç†ä¸­] æ­£åœ¨åˆ é™¤æ‰€æœ‰ç¼–è¯‘ç”Ÿæˆçš„ .exe æ–‡ä»¶...
del /s /q *.exe >nul 2>&1
echo âœ… æ¸…ç†å®Œæˆï¼ä½ çš„ç›®å½•ç°åœ¨å¾ˆå¹²å‡€ã€‚
echo --------------------------------------------------------

echo.
echo æ­£åœ¨æ‰«æå˜åŠ¨æ–‡ä»¶...
git status -s
echo.

:: æ³¨æ„ï¼šè¿™é‡Œå·²ç»æ”¹ä¸ºåŒ¹é…ä½ ä¿®æ”¹åçš„æ­£ç¡®æ–‡ä»¶å
echo [å¤„ç†ä¸­] daily_commit.bat
git add daily_commit.bat
git commit -m "Update: ä¼˜åŒ–è„šæœ¬" >nul 2>&1

:: â¬‡ï¸ è¯·ç¡®ä¿ä¸‹é¢è¿™ä¸€è¡Œæ˜¯åœ¨åŒä¸€è¡Œï¼Œä¸è¦æ–­å¼€ï¼ â¬‡ï¸
set /p msg="è¯·è¾“å…¥æœ¬æ¬¡æäº¤çš„å¤‡æ³¨ (ä¾‹å¦‚: AC Codeforces 1001): "

if "%msg%"=="" set msg=Daily Update

git add .
git commit -m "%msg%"

echo.
echo --------------------------------------------------------
echo æ­£åœ¨æ¨é€åˆ° GitHub...
git push

if %errorlevel% neq 0 (
    color 0C
    echo.
    echo âŒ æ¨é€å¤±è´¥ï¼è¯·æ£€æŸ¥ç½‘ç»œæˆ–ä»£ç†è®¾ç½®ã€‚
) else (
    echo.
    echo ğŸ‰ æˆåŠŸï¼ä»£ç å·²åŒæ­¥ï¼Œåƒåœ¾å·²æ¸…ç†ã€‚
)

echo.
pause